{"version":3,"sources":["styles/App.module.scss","components/ImageGalleryItem/ImageGalleryItem.module.scss","components/Modal/Modal.module.scss","components/ImageGallery/ImageGallery.module.scss","components/Button/Button.module.scss","services/pixabayApi.js","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","App.jsx","index.js","components/Searchbar/Searchbar.module.scss"],"names":["module","exports","API_KEY","BASE_URL","a","query","page","perPage","axios","get","data","pixabayApi","searchImages","Searchbar","state","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","className","css","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","image","onClick","src","alt","ImageGalleryItemImage","ImageGallery","images","onItemClick","map","id","webformatURL","largeImageURL","Button","children","modalRootRef","document","querySelector","Modal","handleKeyDown","code","onClose","handleOverlayClick","currentTarget","window","addEventListener","removeEventListener","createPortal","Overlay","STATE_BASE","currPage","totalCount","App","searchQuery","isLoading","error","modalImg","handleShowModal","handleChangeQuery","searchNextPage","pixApi","hits","totalHits","prevProps","prevState","scrollTo","top","documentElement","scrollHeight","behavior","isLoadMoreShow","isLastPage","name","message","color","height","width","timeout","Loader","ReactDOM","render","StrictMode","getElementById"],"mappings":"sHACAA,EAAOC,QAAU,CAAC,IAAM,iBAAiB,OAAS,oBAAoB,MAAQ,qB,mBCA9ED,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,sBAAwB,kD,mBCAxGD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,uB,mBCA3DD,EAAOC,QAAU,CAAC,aAAe,qC,mBCAjCD,EAAOC,QAAU,CAAC,OAAS,yB,wNCCrBC,EAAU,qCACZC,EAAW,2B,4CAEf,gDAAAC,EAAA,6DAA4BC,EAA5B,+BAAoC,GAAIC,EAAxC,+BAA+C,EAAGC,EAAlD,+BAA4D,GAA5D,SAC2BC,IAAMC,IAAN,UAChBN,EADgB,cACFE,EADE,iBACYC,EADZ,gBACwBJ,EADxB,6DACoFK,IAF/G,uBACYG,EADZ,EACYA,KADZ,kBAKWA,GALX,4C,sBAQA,IACeC,EADI,CAAEC,a,mECTAC,E,4MAKjBC,MAAQ,CACJT,MAAO,I,EAGXU,aAAe,SAAAC,GACX,EAAKC,SAAS,CAAEZ,MAAOW,EAAEE,OAAOC,S,EAGpCC,aAAe,SAAAJ,GACXA,EAAEK,iBAEF,EAAKC,MAAMC,SAAS,EAAKT,MAAMT,OAE/B,EAAKY,SAAS,CAAEZ,MAAO,M,4CAG3B,WACI,OACI,wBAAQmB,UAAWC,IAAIZ,UAAvB,SACI,uBAAMW,UAAWC,IAAIC,WAAYH,SAAUI,KAAKP,aAAhD,UACI,wBAAQQ,KAAK,SAASJ,UAAWC,IAAII,iBAArC,SACI,sBAAML,UAAWC,IAAIK,sBAArB,oDAKJ,uBACIN,UAAWC,IAAIM,gBACfH,KAAK,OACLI,aAAa,MACbC,WAAS,EACTC,YAAY,0IACZC,SAAUR,KAAKZ,aACfI,MAAOQ,KAAKb,MAAMT,iB,GAtCH+B,a,kCCexBC,EAhBU,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,QAAV,OACrB,oBAAIf,UAAWC,IAAIY,iBAAnB,SACI,qBACIG,IAAKF,EACLG,IAAI,GACJjB,UAAWC,IAAIiB,sBACfH,QAASA,OCqBNI,EA1BM,SAAC,GAAD,IAAGC,EAAH,EAAGA,OAAQC,EAAX,EAAWA,YAAX,OACjB,oBAAIrB,UAAWC,IAAIkB,aAAnB,SACKC,EAAOE,KAAI,YAA0C,IAAvCC,EAAsC,EAAtCA,GAAIC,EAAkC,EAAlCA,aAAcC,EAAoB,EAApBA,cAG7B,OACI,cAAC,EAAD,CAEIX,MAAOU,EACPT,QANgB,kBAAMM,EAAYI,KAI7BF,S,iBCGVG,EAXA,SAAC,GAAD,IAAGX,EAAH,EAAGA,QAASY,EAAZ,EAAYA,SAAZ,OACX,wBAAQvB,KAAK,SAASW,QAASA,EAASf,UAAWC,IAAIyB,OAAvD,SACKC,K,iBCAHC,EAAeC,SAASC,cAAc,eAEvBC,E,4MAcjBC,cAAgB,SAAAxC,GACG,WAAXA,EAAEyC,MACF,EAAKnC,MAAMoC,W,EAInBC,mBAAqB,SAAA3C,GACbA,EAAEE,SAAWF,EAAE4C,eACf,EAAKtC,MAAMoC,W,uDAhBnB,WACIG,OAAOC,iBAAiB,UAAWnC,KAAK6B,iB,kCAG5C,WACIK,OAAOE,oBAAoB,UAAWpC,KAAK6B,iB,oBAe/C,WAAU,IACEL,EAAaxB,KAAKL,MAAlB6B,SAER,OAAOa,uBACH,qBAAKxC,UAAWC,IAAIwC,QAAS1B,QAASZ,KAAKgC,mBAA3C,SACI,qBAAKnC,UAAWC,IAAI8B,MAApB,SAA4BJ,MAEhCC,O,GAjCuBhB,aCG7B8B,EAAa,CACftB,OAAQ,GACRuB,SAAU,EACVC,WAAY,GAoHDC,E,4MAhHXvD,M,2BACOoD,G,IACHI,YAAa,GACbC,WAAW,EACXC,MAAO,KACPC,SAAU,K,EAmBdC,gBAAkB,WAAoB,IAAnBD,EAAkB,uDAAP,GAC1B,EAAKxD,SAAS,CAAEwD,c,EAGpBE,kBAAoB,SAAAtE,GAEZA,IAAU,EAAKS,MAAMwD,cAErB,EAAKxD,MAAMyD,WAEf,EAAKtD,SAAL,2BAAmBiD,GAAnB,IAA+BI,YAAajE,O,EAGhDuE,e,sBAAiB,sCAAAxE,EAAA,+DACqB,EAAKU,MAA/BwD,EADK,EACLA,YAAaH,EADR,EACQA,SAErB,EAAKlD,SAAS,CAAEsD,WAAW,EAAMC,MAAO,OAH3B,kBAMyBK,EAAOjE,aACrC0D,EACAH,EAAW,EArDT,IA6CG,gBAMDW,EANC,EAMDA,KAAMC,EANL,EAMKA,UAMd,EAAK9D,UAAS,gBAAG2B,EAAH,EAAGA,OAAQuB,EAAX,EAAWA,SAAX,MAA2B,CACrCvB,OAAO,GAAD,mBAAMA,GAAN,YAAiBkC,IACvBX,SAAUA,EAAW,EACrBC,WAAYW,MAfP,kDAkBT,EAAK9D,SAAS,CAAEuD,MAAK,OAlBZ,yBAoBT,EAAKvD,SAAS,CAAEsD,WAAW,IApBlB,6E,wDA7BjB,SAAmBS,EAAWC,GACtBA,EAAUX,cAAgB3C,KAAKb,MAAMwD,aACrC3C,KAAKiD,iBAILjD,KAAKb,MAAMqD,SAAWc,EAAUd,UAChCxC,KAAKb,MAAMqD,SAAW,GAEtBN,OAAOqB,SAAS,CACZC,IAAK9B,SAAS+B,gBAAgBC,aAC9BC,SAAU,a,wBA0CtB,WAAc,IAAD,EACwB3D,KAAKb,MACtC,OAvEU,GAqED,EACDqD,UADC,EACSC,a,oBAItB,WAAU,IAAD,EAC0CzC,KAAKb,MAA5C8B,EADH,EACGA,OAAQ2B,EADX,EACWA,UAAWC,EADtB,EACsBA,MAAOC,EAD7B,EAC6BA,SAE5Bc,GAAkB5D,KAAK6D,eAAiBjB,EAE9C,OACI,sBAAK/C,UAAWC,IAAI4C,IAApB,UACI,cAAC,EAAD,CAAW9C,SAAUI,KAAKgD,oBAE1B,cAAC,EAAD,CACI/B,OAAQA,EACRC,YAAalB,KAAK+C,kBAGrBF,GACG,oBAAGhD,UAAWC,IAAI+C,MAAlB,6GAC0BA,EAAMiB,KADhC,KACwCjB,EAAMkB,WAIjDH,GACG,cAAC,EAAD,CAAQhD,QAASZ,KAAKiD,eAAtB,uFAGHL,GACG,cAAC,IAAD,CAEI3C,KAAK,YACL+D,MAAM,UACNC,OAAQ,GACRC,MAAO,IACPC,QAAS,EACTtE,UAAWC,IAAIsE,SAItBtB,GACG,cAAC,EAAD,CAAOf,QAAS/B,KAAK+C,gBAArB,SACI,qBAAKlC,IAAKiC,EAAUhC,IAAI,c,GAzG9BL,a,kBCTlB4D,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,EAAD,MAEJ7C,SAAS8C,eAAe,U,kBCV5BnG,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,iBAAmB,oCAAoC,sBAAwB,yCAAyC,gBAAkB,sC","file":"static/js/main.d6bdf8fa.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__1AoHW\",\"Loader\":\"App_Loader__2o1q8\",\"error\":\"App_error__2Qdn7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__Wwijq\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3FTie\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__u262p\",\"Modal\":\"Modal_Modal__xXVJZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__EpeNc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2ux5o\"};","import axios from 'axios';\r\n\r\nconst API_KEY = '20679339-fea13a2297aa7649e9595d106',\r\n    BASE_URL = 'https://pixabay.com/api/';\r\n\r\nasync function searchImages(query = '', page = 1, perPage = 12) {\r\n    const { data } = await axios.get(\r\n        `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=${perPage}`,\r\n    );\r\n\r\n    return data;\r\n}\r\n\r\nconst pixabayApi = { searchImages };\r\nexport default pixabayApi;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport css from './Searchbar.module.scss';\r\n\r\nexport default class Searchbar extends Component {\r\n    static propTypes = {\r\n        onSubmit: PropTypes.func.isRequired,\r\n    };\r\n\r\n    state = {\r\n        query: '',\r\n    };\r\n\r\n    handleChange = e => {\r\n        this.setState({ query: e.target.value });\r\n    };\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        this.props.onSubmit(this.state.query);\r\n\r\n        this.setState({ query: '' });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <header className={css.Searchbar}>\r\n                <form className={css.SearchForm} onSubmit={this.handleSubmit}>\r\n                    <button type=\"submit\" className={css.SearchFormButton}>\r\n                        <span className={css.SearchFormButtonLabel}>\r\n                            Искать\r\n                        </span>\r\n                    </button>\r\n\r\n                    <input\r\n                        className={css.SearchFormInput}\r\n                        type=\"text\"\r\n                        autoComplete=\"off\"\r\n                        autoFocus\r\n                        placeholder=\"Искать изображения и фото\"\r\n                        onChange={this.handleChange}\r\n                        value={this.state.query}\r\n                    />\r\n                </form>\r\n            </header>\r\n        );\r\n    }\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport css from './ImageGalleryItem.module.scss';\r\n\r\nconst ImageGalleryItem = ({ image, onClick }) => (\r\n    <li className={css.ImageGalleryItem}>\r\n        <img\r\n            src={image}\r\n            alt=\"\"\r\n            className={css.ImageGalleryItemImage}\r\n            onClick={onClick}\r\n        />\r\n    </li>\r\n);\r\n\r\nImageGalleryItem.propTypes = {\r\n    image: PropTypes.string.isRequired,\r\n    onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import PropTypes from 'prop-types';\r\nimport css from './ImageGallery.module.scss';\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\n\r\nconst ImageGallery = ({ images, onItemClick }) => (\r\n    <ul className={css.ImageGallery}>\r\n        {images.map(({ id, webformatURL, largeImageURL }) => {\r\n            const handleItemClick = () => onItemClick(largeImageURL);\r\n\r\n            return (\r\n                <ImageGalleryItem\r\n                    key={id}\r\n                    image={webformatURL}\r\n                    onClick={handleItemClick}\r\n                />\r\n            );\r\n        })}\r\n    </ul>\r\n);\r\n\r\nImageGallery.propTypes = {\r\n    images: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            id: PropTypes.number.isRequired,\r\n            largeImageURL: PropTypes.string.isRequired,\r\n        }),\r\n    ).isRequired,\r\n    onItemClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import PropTypes from 'prop-types';\r\nimport css from './Button.module.scss';\r\n\r\nconst Button = ({ onClick, children }) => (\r\n    <button type=\"button\" onClick={onClick} className={css.Button}>\r\n        {children}\r\n    </button>\r\n);\r\n\r\nButton.propTypes = {\r\n    onClick: PropTypes.func.isRequired,\r\n    children: PropTypes.node.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport css from './Modal.module.scss';\r\n\r\nconst modalRootRef = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n    static propTypes = {\r\n        children: PropTypes.node.isRequired,\r\n        onClose: PropTypes.func.isRequired,\r\n    };\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('keydown', this.handleKeyDown);\r\n    }\r\n\r\n    handleKeyDown = e => {\r\n        if (e.code === 'Escape') {\r\n            this.props.onClose();\r\n        }\r\n    };\r\n\r\n    handleOverlayClick = e => {\r\n        if (e.target === e.currentTarget) {\r\n            this.props.onClose();\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { children } = this.props;\r\n\r\n        return createPortal(\r\n            <div className={css.Overlay} onClick={this.handleOverlayClick}>\r\n                <div className={css.Modal}>{children}</div>\r\n            </div>,\r\n            modalRootRef,\r\n        );\r\n    }\r\n}\r\n","import { Component } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport css from './styles/App.module.scss';\r\nimport pixApi from './services/pixabayApi';\r\nimport Searchbar from './components/Searchbar';\r\nimport ImageGallery from './components/ImageGallery/ImageGallery';\r\nimport Button from './components/Button';\r\nimport Modal from './components/Modal';\r\n\r\nconst PAGE_SIZE = 12;\r\nconst STATE_BASE = {\r\n    images: [],\r\n    currPage: 0,\r\n    totalCount: 0,\r\n};\r\n\r\nclass App extends Component {\r\n    state = {\r\n        ...STATE_BASE,\r\n        searchQuery: '',\r\n        isLoading: false,\r\n        error: null,\r\n        modalImg: '',\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevState.searchQuery !== this.state.searchQuery) {\r\n            this.searchNextPage();\r\n        }\r\n\r\n        if (\r\n            this.state.currPage > prevState.currPage &&\r\n            this.state.currPage > 1\r\n        ) {\r\n            window.scrollTo({\r\n                top: document.documentElement.scrollHeight,\r\n                behavior: 'smooth',\r\n            });\r\n        }\r\n    }\r\n\r\n    handleShowModal = (modalImg = '') => {\r\n        this.setState({ modalImg });\r\n    };\r\n\r\n    handleChangeQuery = query => {\r\n        // Без этой проверки повторный поиск по последнему запросу приведет к пустой галерее\r\n        if (query === this.state.searchQuery) return;\r\n\r\n        if (this.state.isLoading) return;\r\n\r\n        this.setState({ ...STATE_BASE, searchQuery: query });\r\n    };\r\n\r\n    searchNextPage = async () => {\r\n        const { searchQuery, currPage } = this.state;\r\n\r\n        this.setState({ isLoading: true, error: null });\r\n\r\n        try {\r\n            const { hits, totalHits } = await pixApi.searchImages(\r\n                searchQuery,\r\n                currPage + 1,\r\n                PAGE_SIZE,\r\n            );\r\n\r\n            this.setState(({ images, currPage }) => ({\r\n                images: [...images, ...hits],\r\n                currPage: currPage + 1,\r\n                totalCount: totalHits,\r\n            }));\r\n        } catch (error) {\r\n            this.setState({ error });\r\n        } finally {\r\n            this.setState({ isLoading: false });\r\n        }\r\n    };\r\n\r\n    isLastPage() {\r\n        const { currPage, totalCount } = this.state;\r\n        return currPage * PAGE_SIZE >= totalCount;\r\n    }\r\n\r\n    render() {\r\n        const { images, isLoading, error, modalImg } = this.state;\r\n\r\n        const isLoadMoreShow = !this.isLastPage() && !isLoading;\r\n\r\n        return (\r\n            <div className={css.App}>\r\n                <Searchbar onSubmit={this.handleChangeQuery} />\r\n\r\n                <ImageGallery\r\n                    images={images}\r\n                    onItemClick={this.handleShowModal}\r\n                />\r\n\r\n                {error && (\r\n                    <p className={css.error}>\r\n                        Что-то пошло не так! {error.name}: {error.message}\r\n                    </p>\r\n                )}\r\n\r\n                {isLoadMoreShow && (\r\n                    <Button onClick={this.searchNextPage}>Загрузить еще</Button>\r\n                )}\r\n\r\n                {isLoading && (\r\n                    <Loader\r\n                        // visible={true}\r\n                        type=\"ThreeDots\"\r\n                        color=\"#3f51b5\"\r\n                        height={50}\r\n                        width={150}\r\n                        timeout={0}\r\n                        className={css.Loader}\r\n                    />\r\n                )}\r\n\r\n                {modalImg && (\r\n                    <Modal onClose={this.handleShowModal}>\r\n                        <img src={modalImg} alt=\"\" />\r\n                    </Modal>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'modern-normalize/modern-normalize.css';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport './styles/global.scss';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App />\r\n    </React.StrictMode>,\r\n    document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2fVBX\",\"SearchForm\":\"Searchbar_SearchForm__1AEbc\",\"SearchFormButton\":\"Searchbar_SearchFormButton__MTsW4\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__2RvEW\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2QEwP\"};"],"sourceRoot":""}